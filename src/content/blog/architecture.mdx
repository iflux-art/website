---
title: 模块化结构
excerpt: 本项目采用模块化架构，将代码按功能和职责划分为不同的模块，以提高代码的可维护性、可测试性和可复用性。
date: '2024-01-01'
tags: ['架构', '模块化', '技术文档']
published: true
---

### 目录结构

```
src/
  ├── app/                 # Next.js App Router 页面
  │   ├── [lang]/          # 多语言路由
  │   ├── layout.tsx       # 根布局
  │   └── globals.css      # 全局样式
  ├── components/          # 组件库
  │   ├── ui/              # 基础UI组件
  │   ├── features/        # 功能组件
  │   └── layout/          # 布局组件
  ├── contexts/            # React Context 上下文
  ├── hooks/               # 自定义 Hooks
  ├── lib/                 # 工具函数和常量
  │   ├── animations.ts    # 动画配置
  │   ├── constants.ts     # 全局常量
  │   └── utils.ts         # 工具函数
  └── content/             # 内容数据
      ├── en/              # 英文内容
      └── zh/              # 中文内容
```

## 组件分类

### UI 组件 (`components/ui/`)

基础UI组件是构建用户界面的基本单元，它们应该是：

- **纯展示型**：不包含业务逻辑
- **可复用**：在多个场景中使用
- **可组合**：可以与其他组件组合使用

例如：Button, Card, Dialog, Input 等。

### 功能组件 (`components/features/`)

功能组件实现特定的功能或业务逻辑：

- **包含业务逻辑**：实现特定功能
- **可能使用多个UI组件**：组合基础组件
- **可能与状态管理交互**：读取或修改应用状态

例如：ThemeToggle, LanguageToggle, SearchButton 等。

### 布局组件 (`components/layout/`)

布局组件定义页面的结构和排列：

- **定义页面结构**：提供一致的布局
- **管理空间分配**：处理元素的排列和间距
- **响应式设计**：适应不同屏幕尺寸

例如：Navbar, Footer, PageLayout 等。

## 状态管理

本项目使用 React Context API 进行状态管理：

- **主题状态**：使用 next-themes 管理明暗主题
- **语言状态**：使用自定义 LanguageContext 管理多语言

## 动画系统

动画使用 Framer Motion 实现，并在 `lib/animations.ts` 中集中定义常用动画：

- **页面过渡**：页面切换动画
- **元素动画**：元素进入、退出和交互动画
- **微交互**：按钮点击、悬停等小型交互动画

## 最佳实践

### 组件设计原则

1. **单一职责**：每个组件只负责一个功能
2. **可组合性**：组件应易于组合使用
3. **可测试性**：组件应易于测试
4. **可访问性**：遵循 WCAG 2.1 标准

### 性能优化

1. **组件懒加载**：使用 React.lazy 和 Suspense
2. **图片优化**：使用 Next.js Image 组件
3. **代码分割**：按路由分割代码
4. **缓存策略**：适当使用 useMemo 和 useCallback

### 代码风格

1. **TypeScript**：使用严格模式
2. **函数组件**：优先使用函数组件和 Hooks
3. **命名约定**：使用描述性命名
4. **注释**：为复杂逻辑添加注释

## 国际化

项目支持中英文两种语言：

1. **路由**：使用 [lang] 动态路由参数
2. **内容**：在 content 目录中按语言组织内容
3. **UI文本**：使用常量文件存储不同语言的UI文本

## 主题系统

使用 next-themes 和 Tailwind CSS 实现明暗主题切换：

1. **主题定义**：在 Tailwind 配置中定义颜色变量
2. **主题切换**：使用 ThemeProvider 和 useTheme hook
3. **组件适配**：组件使用主题相关的 Tailwind 类

## 动画指南

1. **一致性**：使用预定义的动画变体
2. **性能**：优先使用 CSS 转换和不触发重排的属性
3. **可访问性**：尊重用户的减少动画偏好设置
4. **目的性**：动画应有明确目的，增强用户体验