---
title: 文档API接口
description: 文档系统API接口详细说明
date: 2025-08-29
category: API
tags:
  - API
  - 文档
  - 接口文档
---

# 文档API接口

文档API接口提供对技术文档、使用指南等结构化内容的访问能力。

## 基础信息

### 基础URL

```
/api/docs
```

### 认证要求

所有接口均为公开访问，无需认证。

## 接口列表

### 1. 获取文档结构

```
GET /api/docs/global-structure
```

获取完整的文档结构信息，用于生成导航菜单。

#### 响应示例

```json
{
  "success": true,
  "data": {
    "structure": [
      {
        "slug": ["getting-started"],
        "title": "快速开始",
        "description": "从这里开始了解和使用斐流艺创项目",
        "hasIndex": true,
        "firstDocPath": ["getting-started", "index"],
        "itemsCount": 2,
        "items": [
          {
            "slug": ["getting-started", "index"],
            "title": "快速开始",
            "description": "快速开始使用和开发斐流艺创项目"
          },
          {
            "slug": ["getting-started", "faq"],
            "title": "常见问题解答",
            "description": "斐流艺创项目常见问题解答"
          }
        ]
      }
    ]
  },
  "timestamp": "2025-08-29T12:00:00Z"
}
```

### 2. 获取文档内容

```
GET /api/docs/content
```

根据slug参数获取指定文档的内容。

#### 请求参数

| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| slug | string | 是 | 文档路径，多个层级用逗号分隔，如 `getting-started,index` |

#### 响应示例

```json
{
  "success": true,
  "data": {
    "slug": ["getting-started", "index"],
    "title": "快速开始",
    "description": "快速开始使用和开发斐流艺创项目",
    "date": "2025-08-29",
    "content": "# 快速开始\n\n本文档将指导您如何快速设置开发环境并运行斐流艺创项目。",
    "tableOfContents": [
      {
        "id": "前置要求",
        "text": "前置要求",
        "level": 2
      }
    ]
  },
  "timestamp": "2025-08-29T12:00:00Z"
}
```

## 数据结构

### 文档结构信息

```typescript
interface DocsStructure {
  slug: string[];
  title: string;
  description?: string;
  hasIndex: boolean;
  firstDocPath?: string[];
  itemsCount: number;
  items?: DocsStructureItem[];
}

interface DocsStructureItem {
  slug: string[];
  title: string;
  description?: string;
}
```

### 文档内容信息

```typescript
interface DocsContent {
  slug: string[];
  title: string;
  description: string;
  date: string; // ISO 8601格式
  content: string; // Markdown格式内容
  tableOfContents: TableOfContentsItem[];
}

interface TableOfContentsItem {
  id: string;
  text: string;
  level: number; // 1-6级标题
}
```

## 错误响应

### 404 - 文档未找到

```json
{
  "success": false,
  "error": {
    "code": "DOC_NOT_FOUND",
    "message": "文档不存在"
  },
  "timestamp": "2025-08-29T12:00:00Z"
}
```

### 400 - 参数错误

```json
{
  "success": false,
  "error": {
    "code": "INVALID_PARAMETERS",
    "message": "参数验证失败",
    "details": {
      "slug": "文档路径不能为空"
    }
  },
  "timestamp": "2025-08-29T12:00:00Z"
}
```

## 使用示例

### JavaScript (fetch)

```javascript
// 获取文档结构
async function getDocsStructure() {
  try {
    const response = await fetch('/api/docs/global-structure');
    const result = await response.json();
    
    if (result.success) {
      console.log('文档结构:', result.data.structure);
    } else {
      console.error('获取失败:', result.error.message);
    }
  } catch (error) {
    console.error('网络错误:', error);
  }
}

// 获取文档内容
async function getDocContent(slug) {
  try {
    // 将数组转换为逗号分隔的字符串
    const slugParam = slug.join(',');
    const response = await fetch(`/api/docs/content?slug=${encodeURIComponent(slugParam)}`);
    const result = await response.json();
    
    if (result.success) {
      console.log('文档内容:', result.data);
    } else {
      console.error('获取失败:', result.error.message);
    }
  } catch (error) {
    console.error('网络错误:', error);
  }
}
```

### Python (requests)

```python
import requests

# 获取文档结构
def get_docs_structure():
    try:
        response = requests.get('https://your-domain.com/api/docs/global-structure')
        result = response.json()
        
        if result['success']:
            print('文档结构:', result['data']['structure'])
        else:
            print('获取失败:', result['error']['message'])
    except Exception as error:
        print('网络错误:', error)

# 获取文档内容
def get_doc_content(slug):
    try:
        # 将数组转换为逗号分隔的字符串
        slug_param = ','.join(slug)
        response = requests.get(
            f'https://your-domain.com/api/docs/content',
            params={'slug': slug_param}
        )
        result = response.json()
        
        if result['success']:
            print('文档内容:', result['data'])
        else:
            print('获取失败:', result['error']['message'])
    except Exception as error:
        print('网络错误:', error)
```

## 速率限制

- 每个IP每分钟最多100次请求
- 由于文档内容相对静态，建议客户端实现适当的缓存机制

## 更新日志

### v1.0.0 (2025-08-29)

- 初始化文档API接口
- 实现文档结构和内容接口

## 注意事项

1. 所有时间字段使用ISO 8601格式
2. 文档内容为Markdown格式
3. 文档路径slug参数使用逗号分隔多个层级
4. 建议对返回的数据进行适当的转义处理
5. 文档结构相对稳定，可以缓存较长时间

通过这些API接口，开发者可以轻松地在自己的应用中集成文档浏览功能，获取和展示技术文档内容。