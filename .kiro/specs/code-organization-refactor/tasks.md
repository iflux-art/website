# 代码组织重构实施任务

- [x] 1. 代码依赖关系分析和准备工作
  - 扫描所有源文件，分析当前的导入导出关系
  - 识别跨功能模块使用的共享代码
  - 创建文件移动映射表和路径更新计划
  - _需求: 1.1, 2.1, 3.1_

- [x] 2. 提升共享类型定义到全局类型目录
  - [x] 2.1 分析和移动跨功能使用的类型定义
    - 将 `@/features/content/types/BreadcrumbItem` 移动到 `@/types/content-types.ts`
    - 将 `@/features/docs/types/Heading` 移动到 `@/types/content-types.ts`
    - 更新 `@/types/index.ts` 导出新的类型文件
    - _需求: 1.2, 1.7, 4.3_

  - [x] 2.2 更新类型定义的导入路径
    - 更新所有引用 BreadcrumbItem 的文件导入路径
    - 更新所有引用 Heading 的文件导入路径
    - 验证 TypeScript 编译无错误
    - _需求: 3.2, 3.3, 3.5_

- [x] 3. 提升共享工具函数到全局 lib 目录
  - [x] 3.1 分析 website-parser 功能的使用情况
    - 检查 `@/features/website-parser` 是否被多个功能使用
    - 如果是共享功能，移动到 `@/lib/website-parser.ts`
    - 如果是功能特定，保持在 features 目录
    - _需求: 1.2, 1.7_

  - [x] 3.2 更新工具函数的导入路径和导出
    - 更新 `@/lib/index.ts` 添加新的工具函数导出
    - 更新所有引用 website-parser 的文件导入路径
    - 验证所有工具函数正常工作
    - _需求: 3.2, 3.3, 4.1, 4.2_

- [x] 4. 提升共享 hooks 到全局 hooks 目录
  - [x] 4.1 分析 content hooks 的使用情况
    - 检查 `@/features/content/hooks/use-content-data` 的使用范围
    - 如果被多个功能使用，移动到 `@/hooks/use-content-data.ts`
    - 保持功能特定的 hooks 在原位置
    - _需求: 1.3, 1.7_

  - [x] 4.2 更新 hooks 的导入路径和导出
    - 更新 `@/hooks/index.ts` 添加新的 hooks 导出
    - 更新所有引用共享 hooks 的文件导入路径
    - 验证所有 hooks 功能正常
    - _需求: 3.2, 3.3, 4.1, 4.2_

- [ ] 5. 整理功能模块内部代码组织
  - [x] 5.1 标准化 auth 功能模块结构
    - 为 auth 功能创建 types、lib、hooks 子目录（如需要）
    - 移动功能特定代码到对应子目录
    - 更新 `@/features/auth/index.ts` 统一导出
    - _需求: 2.2, 2.3, 2.4, 2.5, 2.7_

  - [x] 5.2 标准化 admin 功能模块结构
    - 为 admin 功能创建 types、lib 子目录（如需要）
    - 移动功能特定代码到对应子目录
    - 更新功能内部的导入路径
    - _需求: 2.2, 2.3, 2.4, 2.5, 2.8_

  - [x] 5.3 标准化 comment 功能模块结构
    - 为 comment 功能创建 types、lib、hooks 子目录（如需要）
    - 移动功能特定代码到对应子目录
    - 更新 `@/features/comment/index.ts` 统一导出
    - _需求: 2.2, 2.3, 2.4, 2.5, 2.7_

  - [x] 5.4 标准化 home 功能模块结构
    - 为 home 功能创建 types、lib 子目录（如需要）
    - 移动功能特定代码到对应子目录
    - 创建 `@/features/home/index.ts` 统一导出
    - _需求: 2.2, 2.3, 2.4, 2.5, 2.7_

  - [x] 5.5 标准化 layout 功能模块结构
    - 整理 layout 功能的子目录结构
    - 创建 types、lib 子目录（如需要）
    - 更新 layout 相关组件的导入路径
    - _需求: 2.2, 2.3, 2.4, 2.5, 2.8_

- [x] 6. 更新应用层导入路径
  - [x] 6.1 更新 app 目录下的页面组件导入
    - 更新所有 page.tsx 文件的导入路径
    - 更新 layout.tsx 的导入路径
    - 确保所有页面正常渲染
    - _需求: 3.2, 3.3, 3.4_

  - [x] 6.2 更新 app 目录下的其他组件导入
    - 更新 not-found.tsx 等特殊页面的导入路径
    - 验证所有应用级组件正常工作
    - _需求: 3.2, 3.3, 3.4_

- [x] 7. 创建和更新统一导出文件
  - [x] 7.1 更新共享目录的 index 文件
    - 更新 `@/types/index.ts` 包含所有类型导出
    - 更新 `@/lib/index.ts` 包含所有工具函数导出
    - 更新 `@/hooks/index.ts` 包含所有 hooks 导出
    - 更新 `@/components/index.ts` 包含所有组件导出
    - _需求: 4.1, 4.2, 4.3_

  - [x] 7.2 创建功能模块的统一导出文件
    - 为缺少 index.ts 的功能模块创建统一导出文件
    - 确保每个功能模块都有清晰的导出接口
    - 验证导出的一致性和完整性
    - _需求: 4.4, 4.5_

- [x] 8. 全面验证和测试
  - [x] 8.1 TypeScript 编译验证
    - 运行 TypeScript 编译检查，确保无类型错误
    - 修复任何编译错误和警告
    - 验证所有导入路径正确解析
    - _需求: 3.5, 5.5_

  - [x] 8.2 应用构建和功能测试
    - 运行应用构建命令，确保构建成功
    - 测试所有主要功能页面正常工作
    - 验证组件渲染和交互功能
    - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

  - [x] 8.3 导入导出一致性检查
    - 验证所有导出模式符合项目标准
    - 检查是否存在未使用的导入或导出
    - 确保向后兼容性得到维护
    - _需求: 4.5, 4.6, 5.3_

- [x] 9. 代码清理和优化
  - [x] 9.1 清理冗余代码和导入
    - 移除未使用的导入语句
    - 清理重复的类型定义和工具函数
    - 优化导入路径，使用更简洁的形式
    - _需求: 3.4, 4.2_

  - [x] 9.2 更新代码注释和文档
    - 更新文件头部注释，反映新的组织结构
    - 添加必要的 JSDoc 注释
    - 确保代码可读性和维护性
    - _需求: 5.2, 5.4_
